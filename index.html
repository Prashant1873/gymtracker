<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gym Streak Tracker</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .logo {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 20px;
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
    }

    .user-btn {
      width: 100%;
      padding: 18px;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .user-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }

    .user-btn:active {
      transform: translateY(0);
    }

    .streak-badge {
      background: rgba(255,255,255,0.2);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 14px;
    }

    .header {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .avatar {
      width: 50px;
      height: 50px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .logout-btn {
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    .logout-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-card {
      padding: 20px;
      border-radius: 16px;
      border: 2px solid #f0f0f0;
    }

    .stat-label {
      color: #666;
      font-size: 13px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: #333;
    }

    .stat-subtext {
      color: #999;
      font-size: 11px;
      margin-top: 4px;
    }

    .checkin-btn {
      width: 100%;
      padding: 20px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 20px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 20px;
    }

    .checkin-btn:hover:not(:disabled) {
      transform: scale(1.02);
      box-shadow: 0 10px 30px rgba(245,87,108,0.4);
    }

    .checkin-btn:disabled {
      background: #4ade80;
      cursor: not-allowed;
      opacity: 0.9;
    }

    .leaderboard {
      margin-top: 20px;
    }

    .leaderboard h3 {
      color: #333;
      margin-bottom: 15px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .leaderboard-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: #f9f9f9;
      border-radius: 12px;
      margin-bottom: 10px;
      transition: all 0.2s;
    }

    .leaderboard-item:hover {
      background: #f0f0f0;
      transform: translateX(4px);
    }

    .leaderboard-item.current-user {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 2px solid #fbbf24;
    }

    .rank {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }

    .rank-1 { background: #fbbf24; color: white; }
    .rank-2 { background: #d1d5db; color: #374151; }
    .rank-3 { background: #f97316; color: white; }
    .rank-other { background: #e5e7eb; color: #6b7280; }

    .leaderboard-name {
      flex: 1;
      margin-left: 12px;
    }

    .leaderboard-streak {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: bold;
      font-size: 20px;
      color: #f97316;
    }

    .calendar {
      margin-top: 20px;
    }

    .calendar h3 {
      color: #333;
      margin-bottom: 15px;
      font-size: 18px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
    }

    .calendar-day {
      aspect-ratio: 1;
      background: #f0f0f0;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #999;
    }

    .calendar-day.checked {
      background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
      color: white;
      font-weight: bold;
    }

    .confetti {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 100px;
      animation: bounce 0.6s ease-in-out;
      pointer-events: none;
      z-index: 1000;
    }

    @keyframes bounce {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
    }

    .hidden {
      display: none;
    }

    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      
      .card {
        padding: 20px;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen" class="container">
    <div class="card">
      <div class="logo">üèãÔ∏è</div>
      <h1>Gym Streak Tracker</h1>
      <p class="subtitle">Build your workout consistency</p>
      <div id="userButtons"></div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="container hidden">
    <div class="header">
      <div class="user-info">
        <div class="avatar">üí™</div>
        <div>
          <div id="userName" style="font-weight: 600; font-size: 18px;"></div>
          <div id="currentDate" style="opacity: 0.8; font-size: 13px;"></div>
        </div>
      </div>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>

    <div class="card">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">üî• Current Streak</div>
          <div class="stat-value" id="currentStreak">0</div>
          <div class="stat-subtext">days in a row</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">üèÜ Best Streak</div>
          <div class="stat-value" id="longestStreak">0</div>
          <div class="stat-subtext">personal record</div>
        </div>
      </div>

      <div class="stat-card" style="margin-bottom: 20px;">
        <div class="stat-label">üìà Total Workouts</div>
        <div class="stat-value" id="totalWorkouts">0</div>
        <div class="stat-subtext">lifetime check-ins</div>
      </div>

      <button class="checkin-btn" id="checkinBtn" onclick="checkIn()">
        üî• Check in workout
      </button>
      
      <button class="logout-btn" style="margin-bottom:20px;" onclick="resetUser()">
        üîÑ Reset My Data
      </button>

      <div class="leaderboard">
        <h3>üèÖ Leaderboard</h3>
        <div id="leaderboardList"></div>
      </div>

      <div class="calendar">
        <h3>üìÖ Recent Activity</h3>
        <div class="calendar-grid" id="calendarGrid"></div>
      </div>
    </div>
  </div>

  <script>
   const initialUsers = {
  prashant: { name: 'Prashant', workoutDates: [], currentStreak: 0, longestStreak: 0, lastCheckIn: null },
  vaibhav: { name: 'Vaibhav', workoutDates: [], currentStreak: 0, longestStreak: 0, lastCheckIn: null },
  shivanshi: { name: 'Shivanshi', workoutDates: [], currentStreak: 0, longestStreak: 0, lastCheckIn: null }
  };

    let users = { ...initialUsers };
    let currentUser = null;

    // Utility functions
    function resetUser() {
      if (!currentUser) return;

      const user = users[currentUser];

      user.workoutDates = [];
      user.currentStreak = 0;
      user.longestStreak = 0;
      user.lastCheckIn = null;

      saveData();
      updateDashboard();
      renderLoginScreen();
    }

    
    function getToday() {
      const date = new Date();
      return date.toISOString().split('T')[0];
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr + 'T00:00:00');
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    function calculateStreak(dates) {
      if (!dates || dates.length === 0) return { current: 0, longest: 0 };
      
      const sortedDates = [...dates].sort().reverse();
      const today = getToday();
      
      let currentStreak = 0;
      let longestStreak = 0;
      let tempStreak = 0;
      
      const lastCheckIn = sortedDates[0];
      const daysDiff = Math.floor((new Date(today) - new Date(lastCheckIn)) / (1000 * 60 * 60 * 24));
      
      if (daysDiff > 1) {
        currentStreak = 0;
      } else {
        for (let i = 0; i < sortedDates.length; i++) {
          if (i === 0) {
            tempStreak = 1;
          } else {
            const prevDate = new Date(sortedDates[i - 1]);
            const currDate = new Date(sortedDates[i]);
            const diff = Math.floor((prevDate - currDate) / (1000 * 60 * 60 * 24));
            
            if (diff === 1) {
              tempStreak++;
            } else {
              break;
            }
          }
        }
        currentStreak = tempStreak;
      }
      
      tempStreak = 1;
      for (let i = 0; i < sortedDates.length; i++) {
        if (i === 0) {
          tempStreak = 1;
          longestStreak = 1;
        } else {
          const prevDate = new Date(sortedDates[i - 1]);
          const currDate = new Date(sortedDates[i]);
          const diff = Math.floor((prevDate - currDate) / (1000 * 60 * 60 * 24));
          
          if (diff === 1) {
            tempStreak++;
            longestStreak = Math.max(longestStreak, tempStreak);
          } else {
            tempStreak = 1;
          }
        }
      }
      
      return { current: currentStreak, longest: Math.max(longestStreak, currentStreak) };
    }

    function daysBetween(date1, date2) {
      const d1 = new Date(date1 + 'T00:00:00');
      const d2 = new Date(date2 + 'T00:00:00');
      return Math.floor((d2 - d1) / (1000 * 60 * 60 * 24));
    }

    // Storage functions
    function saveData() {
      localStorage.setItem('gymUsers', JSON.stringify(users));
    }

    function loadData() {
      const stored = localStorage.getItem('gymUsers');
      if (stored) {
        users = JSON.parse(stored);
      }

      normalizeStreaks();
      
      const storedUser = localStorage.getItem('currentUser');
      if (storedUser) {
        login(storedUser);
      }
    }

    // Login functions
    function renderLoginScreen() {
      const userButtons = document.getElementById('userButtons');
      userButtons.innerHTML = '';
      
      Object.entries(users).forEach(([username, data]) => {
        const btn = document.createElement('button');
        btn.className = 'user-btn';
        btn.onclick = () => login(username);
        btn.innerHTML = `
          <span>${data.name}</span>
          <span class="streak-badge">üî• ${data.currentStreak}</span>
        `;
        userButtons.appendChild(btn);
      });
    }

    function login(username) {
      currentUser = username;
      localStorage.setItem('currentUser', username);
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('dashboard').classList.remove('hidden');
      updateDashboard();
    }

    function logout() {
      currentUser = null;
      localStorage.removeItem('currentUser');
      document.getElementById('loginScreen').classList.remove('hidden');
      document.getElementById('dashboard').classList.add('hidden');
      renderLoginScreen();
    }

    // Check-in function
    function checkIn() {
      const today = getToday();
      const user = users[currentUser];

      if (user.workoutDates.includes(today)) return;

      if (!user.lastCheckIn) {
        user.currentStreak = 1;
      } else {
      const diff = daysBetween(user.lastCheckIn, today);
      user.currentStreak = diff === 1 ? user.currentStreak + 1 : 1;
      }

      user.lastCheckIn = today;
      user.longestStreak = Math.max(user.longestStreak, user.currentStreak);
      user.workoutDates.push(today);

      saveData();
      updateDashboard();

      if ([7, 14, 30, 50, 100].includes(user.currentStreak)) {
        showConfetti();
      }
    }

    function showConfetti() {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.textContent = 'üéâ';
      document.body.appendChild(confetti);
      
      setTimeout(() => {
        confetti.remove();
      }, 600);
    }

    function normalizeStreaks() {
      const today = getToday();

      Object.values(users).forEach(user => {
        if (!user.lastCheckIn) return;

        const diff = daysBetween(user.lastCheckIn, today);
        if (diff > 1) {
          user.currentStreak = 0;
        }
      });
    }

    // Update dashboard
    function updateDashboard() {
      const user = users[currentUser];
      const today = getToday();
      const hasCheckedIn = user.workoutDates.includes(today);
      
      document.getElementById('userName').textContent = user.name;
      document.getElementById('currentDate').textContent = formatDate(today);
      document.getElementById('currentStreak').textContent = user.currentStreak;
      document.getElementById('longestStreak').textContent = user.longestStreak;
      document.getElementById('totalWorkouts').textContent = user.workoutDates.length;
      
      const checkinBtn = document.getElementById('checkinBtn');
      if (hasCheckedIn) {
        checkinBtn.textContent = '‚úì Workout logged for today';
        checkinBtn.disabled = true;
      } else {
        checkinBtn.textContent = 'üî• Check in workout';
        checkinBtn.disabled = false;
      }
      
      updateLeaderboard();
      updateCalendar();
    }

    function updateLeaderboard() {
      const leaderboard = Object.entries(users)
        .map(([username, data]) => ({ username, ...data }))
        .sort((a, b) => b.currentStreak - a.currentStreak);
      
      const list = document.getElementById('leaderboardList');
      list.innerHTML = '';
      
      leaderboard.forEach((userData, index) => {
        const item = document.createElement('div');
        item.className = 'leaderboard-item';
        if (userData.username === currentUser) {
          item.classList.add('current-user');
        }
        
        const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : 'rank-other';
        
        item.innerHTML = `
          <div class="rank ${rankClass}">${index + 1}</div>
          <div class="leaderboard-name">
            <div style="font-weight: 600;">${userData.name}</div>
            <div style="font-size: 12px; color: #666;">${userData.workoutDates.length} workouts</div>
          </div>
          <div class="leaderboard-streak">
            üî• ${userData.currentStreak}
          </div>
        `;
        list.appendChild(item);
      });
    }

    function updateCalendar() {
      const user = users[currentUser];
      const grid = document.getElementById('calendarGrid');
      grid.innerHTML = '';
      
      const recent = user.workoutDates.slice(-28).reverse();
      
      if (recent.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 20px; color: #999;">No workouts yet. Start your streak today!</div>';
        return;
      }
      
      recent.forEach(date => {
        const day = document.createElement('div');
        day.className = 'calendar-day checked';
        const d = new Date(date + 'T00:00:00');
        day.textContent = d.getDate();
        grid.appendChild(day);
      });
    }

    // Initialize
    loadData();
    renderLoginScreen();
  </script>
</body>
</html>
